<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>예제 문서</title>
	</head>
	<body>
		<h1>UPPERSITE CRUD Example</h1>
		<form>
			<h3>Article Form</h3>
			<p>
				<input name="title" placeholder="Article Title.">
			</p>
			<p>
				<textarea name="content" placeholder="Article Content."></textarea>
			</p>
			<p>
				<input type="submit">
			</p>
		</form>
		<ul>

		</ul>
		<script src="/__SCRIPT"></script>
		<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<script>
			var
			// article model
			articleModel = CRUDExample.ArticleModel();

			articleModel.findDataSet({
				sort : {
					createTime : -1
				}
			}, function(result) {

				if (result.hasError === false) {

					EACH(result.savedDatas, function(data) {
						$('ul').append('<li>' + data.title + '</li>');
					});
				}
			});

			articleModel.onNew(function(savedData) {
				$('ul').append('<li>' + savedData.title + '</li>');
			});

			$('form').submit(function() {

				var
				// data
				data = {};

				$.each($(this).serializeArray(), function(i, o) {
					data[o.name] = o.value;
				});

				articleModel.create(data, function(result) {

					if (result.hasError === false) {
						alert('Success.');
					} else {
						alert(JSON.stringify(result.errors));
					}
				});

				return false;
			});
		</script>
	</body>
</html>